<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <style>
    body { font-family: Arial, sans-serif; font-size: 12px; }
    .header { display:flex; justify-content: space-between; align-items: center; }
    .title { font-size: 20px; font-weight: bold; }
    table { width: 100%; border-collapse: collapse; margin-top: 16px; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: left; }
    .totals { margin-top: 16px; width: 40%; float: right; }
  </style>
</head>
<body>
  <div class="header">
    <div class="title">INVOICE</div>
    <div>
      <div><strong th:text="${invoice.invoiceNumber} ?: 'DRAFT'"></strong></div>
      <div>Issue: <span th:text="${invoice.issueDate}"></span></div>
      <div>Due: <span th:text="${invoice.dueDate}"></span></div>
      <div>Status: <span th:text="${invoice.status}"></span></div>
    </div>
  </div>

  <div>
    <h3>Bill To</h3>
    <div th:text="${invoice.customer.name}"></div>
    <div th:text="${invoice.customer.billingAddress}"></div>
    <div th:text="${invoice.customer.email}"></div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Description</th>
        <th>Qty</th>
        <th>Unit Price</th>
        <th>Tax %</th>
        <th>Line Total</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="it : ${invoice.items}">
        <td th:text="${it.description}"></td>
        <td th:text="${it.quantity}"></td>
        <td th:text="${it.unitPrice}"></td>
        <td th:text="${it.taxRate}"></td>
        <td th:text="${it.lineTotal}"></td>
      </tr>
    </tbody>
  </table>

  <table class="totals">
    <tr><td>Subtotal</td><td th:text="${invoice.subTotal}"></td></tr>
    <tr><td>Tax</td><td th:text="${invoice.taxTotal}"></td></tr>
    <tr><td><strong>Total</strong></td><td><strong th:text="${invoice.total}"></strong></td></tr>
    <tr><td>Balance Due</td><td th:text="${invoice.balanceDue}"></td></tr>
  </table>
</body>
</html>
